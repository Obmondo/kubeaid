sonarqube:
  community:
    enabled: true
  revisionHistoryLimit: 0
  # This monitoringPasscode is for Prometheus to scrape Sonarqube metrics
  # This needs to be set for the helm chart to work as this is a validation rule.
  # See https://github.com/Obmondo/kubeaid/blob/master/argocd-helm-charts/sonarqube/charts/sonarqube/templates/validation.yaml#L9-L14
  # This should be set as a sealed secret and not kept in plaintext in git, if the podmonitor is enabled.
  # See https://github.com/Obmondo/kubeaid/blob/master/argocd-helm-charts/sonarqube/charts/sonarqube/templates/prometheus-podmonitor.yaml#L36
  monitoringPasscode: "define_it"
  postgresql:
    enabled: false
  resources:
    limits:
      cpu: null
  plugins:
    install:
      # See this https://community.sonarsource.com/t/sonar-auth-oidc-plugin-version-compatibility/134941/11
      # before enabling this oidc plugin
      - "https://github.com/sonar-auth-oidc/sonar-auth-oidc/releases/download/v3.0.0/sonar-auth-oidc-plugin-3.0.0.jar"
  account:
    adminPasswordSecretName: sonarqube-admin-credentials
  jdbcOverwrite:
    enable: true
    jdbcSecretName: sonarqube.sonarqube-pgsql.credentials.postgresql.acid.zalan.do
    jdbcSecretPasswordKey: password
    jdbcUrl: "jdbc:postgresql://sonarqube-pgsql/sonarqube?socketTimeout=1500"
    jdbcUsername: sonarqube

postgresql:
  size: 4Gi

networkpolicies: false

blackbox:
  probe: true
